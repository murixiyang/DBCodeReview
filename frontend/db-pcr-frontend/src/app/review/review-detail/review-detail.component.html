<div class="page-container">
  <div class="diff-header">
    <h3>
      Submitted by {{ pseudoCommitDto.authorPseudonym }} at
      {{
        pseudoCommitDto.commit.committedAt | date : "YYYY-MM-dd HH:mm" : "UTC"
      }}
    </h3>

    <h3>Commit message: {{ pseudoCommitDto.commit.message }}</h3>

    <div>
      <button (click)="onOpenPublishDialog()">Submit Review</button>

      <app-publish-dialog
        *ngIf="showPublishDialog"
        [count]="getAllDraftCount()"
        (confirm)="onPublishConfirmed($event)"
        (cancel)="showPublishDialog = false"
      ></app-publish-dialog>
    </div>
  </div>

  <div *ngFor="let f of fileKeys" class="diff-container">
    <app-diff-table
      #diffTable
      [selectedAssignmentId]="assignmentId"
      [gerritChangeId]="gerritChangeId"
      [oldText]="fileContents.get(f)?.[0]!"
      [newText]="fileContents.get(f)?.[1]!"
      [file]="f"
    ></app-diff-table>
  </div>
</div>
